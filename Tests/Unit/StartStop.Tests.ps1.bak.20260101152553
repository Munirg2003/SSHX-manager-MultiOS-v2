# Pester skeleton for Start-SSHXProcess and Stop-SSHXProcess

Describe "Start/Stop SSHX" {
    It "does not start when sshx not installed" {
        Mock -CommandName Test-Path -MockWith { $false }
        $result = Start-SSHXProcess
        $result | Should -BeFalse
    }

    It "starts process when installed" {
        Mock -CommandName Test-Path -MockWith { $true }
        Mock -CommandName Start-Process -MockWith { @{Id=9999} }
        Mock -CommandName Get-Process -MockWith { @{Id=9999} }
        $result = Start-SSHXProcess
        $result | Should -BeTrue
    }

    It "stops running processes" {
        Mock -CommandName Get-Process -MockWith { @{Id=9999} }
        Mock -CommandName Stop-Process -MockWith { $null }
        $result = Stop-SSHXProcess
        $result | Should -BeTrue
    }
}